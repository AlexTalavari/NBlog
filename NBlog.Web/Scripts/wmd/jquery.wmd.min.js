function setup_wmd(n){var t=t||{};n=n||top.wmd_options||{};t.wmdBase=function(){var i=t,u=top.document,o=top.RegExp,h=top.navigator;i.Util={};i.Position={};i.Command={};i.Global={};i.buttons={};i.showdown=top.Attacklab&&top.Attacklab.showdown;var f=i.Util,s=i.Position,r=i.Command,e=i.Global;e.isIE=/msie/.test(h.userAgent.toLowerCase());e.isIE_5or6=/msie 6/.test(h.userAgent.toLowerCase())||/msie 5/.test(h.userAgent.toLowerCase());e.isIE_7plus=e.isIE&&!e.isIE_5or6;e.isOpera=/opera/.test(h.userAgent.toLowerCase());e.isKonqueror=/konqueror/.test(h.userAgent.toLowerCase());var c=n.imageDialogText||"<p style='margin-top: 0px'><b>Enter the image URL.<\/b><\/p><p>You can also add a title, which will be displayed as a tool tip.<\/p><p>Example:<br />http://wmd-editor.com/images/cloud1.jpg   \"Optional title\"<\/p>",l=n.linkDialogText||"<p style='margin-top: 0px'><b>Enter the web address.<\/b><\/p><p>You can also add a title, which will be displayed as a tool tip.<\/p><p>Example:<br />http://wmd-editor.com/   \"Optional title\"<\/p>",a="http://",v="http://",y="images/",p=500,w=100,b=n.helpLink||"http://wmd-editor.com/",k=n.helpHoverTitle||"WMD website",d=n.helpTarget||"_blank";i.PanelCollection=function(){this.buttonBar=u.getElementById(n.button_bar||"wmd-button-bar");this.preview=u.getElementById(n.preview||"wmd-preview");this.output=u.getElementById(n.output||"wmd-output");this.input=u.getElementById(n.input||"wmd-input")};i.panels=undefined;i.ieCachedRange=null;i.ieRetardedClick=!1;f.isVisible=function(n){return window.getComputedStyle?window.getComputedStyle(n,null).getPropertyValue("display")!=="none":n.currentStyle?n.currentStyle.display!=="none":void 0};f.addEvent=function(n,t,i){n.attachEvent?n.attachEvent("on"+t,i):n.addEventListener(t,i,!1)};f.removeEvent=function(n,t,i){n.detachEvent?n.detachEvent("on"+t,i):n.removeEventListener(t,i,!1)};f.fixEolChars=function(n){return n=n.replace(/\r\n/g,"\n"),n.replace(/\r/g,"\n")};f.extendRegExp=function(n,t,i){(t===null||t===undefined)&&(t="");(i===null||i===undefined)&&(i="");var r=n.toString(),u="",f=r.match(/\/([gim]*)$/);return u=f===null?f[0]:"",r=r.replace(/(^\/|\/[gim]*$)/g,""),r=t+r+i,new RegExp(r,u)};f.createImage=function(n){var i=y+n,t=u.createElement("img");return t.className="wmd-button",t.src=i,t};f.prompt=function(n,t,i){var r,c,o;t===undefined&&(t="");var a=function(n){var t=n.charCode||n.keyCode;t===27&&l(!0)},l=function(n){f.removeEvent(u.body,"keydown",a);var t=o.value;return n?t=null:(t=t.replace("http://http://","http://"),t=t.replace("http://https://","https://"),t=t.replace("http://ftp://","ftp://"),t.indexOf("http://")===-1&&t.indexOf("ftp://")===-1&&t.indexOf("https://")===-1&&(t="http://"+t)),r.parentNode.removeChild(r),c.parentNode.removeChild(c),i(t),!1},v=function(){c=u.createElement("div");c.className="wmd-prompt-background";style=c.style;style.position="absolute";style.top="0";style.zIndex="1000";e.isKonqueror?style.backgroundColor="transparent":e.isIE?style.filter="alpha(opacity=50)":style.opacity="0.5";var n=s.getPageSize();style.height=n[1]+"px";e.isIE?(style.left=u.documentElement.scrollLeft,style.width=u.documentElement.clientWidth):(style.left="0",style.width="100%");u.body.appendChild(c)},y=function(){var y,i,c,v;r=u.createElement("div");r.className="wmd-prompt-dialog";r.style.padding="10px;";r.style.position="fixed";r.style.width="400px";r.style.zIndex="1001";y=u.createElement("div");y.innerHTML=n;y.style.padding="5px";r.appendChild(y);i=u.createElement("form");i.onsubmit=function(){return l(!1)};style=i.style;style.padding="0";style.margin="0";style.cssFloat="left";style.width="100%";style.textAlign="center";style.position="relative";r.appendChild(i);o=u.createElement("input");o.type="text";o.value=t;style=o.style;style.display="block";style.width="80%";style.marginLeft=style.marginRight="auto";i.appendChild(o);c=u.createElement("input");c.type="button";c.onclick=function(){return l(!1)};c.value="OK";style=c.style;style.margin="10px";style.display="inline";style.width="7em";v=u.createElement("input");v.type="button";v.onclick=function(){return l(!0)};v.value="Cancel";style=v.style;style.margin="10px";style.display="inline";style.width="7em";/mac/.test(h.platform.toLowerCase())?(i.appendChild(v),i.appendChild(c)):(i.appendChild(c),i.appendChild(v));f.addEvent(u.body,"keydown",a);r.style.top="50%";r.style.left="50%";r.style.display="block";e.isIE_5or6&&(r.style.position="absolute",r.style.top=u.documentElement.scrollTop+200+"px",r.style.left="50%");u.body.appendChild(r);r.style.marginTop=-(s.getHeight(r)/2)+"px";r.style.marginLeft=-(s.getWidth(r)/2)+"px"};v();top.setTimeout(function(){var i,n;y();i=t.length;o.selectionStart!==undefined?(o.selectionStart=0,o.selectionEnd=i):o.createTextRange&&(n=o.createTextRange(),n.collapse(!1),n.moveStart("character",-i),n.moveEnd("character",i),n.select());o.focus()},0)};s.getTop=function(n,t){var i=n.offsetTop;if(!t)while(n=n.offsetParent)i+=n.offsetTop;return i};s.getHeight=function(n){return n.offsetHeight||n.scrollHeight};s.getWidth=function(n){return n.offsetWidth||n.scrollWidth};s.getPageSize=function(){var i,r,n,t,f,e;return self.innerHeight&&self.scrollMaxY?(i=u.body.scrollWidth,r=self.innerHeight+self.scrollMaxY):u.body.scrollHeight>u.body.offsetHeight?(i=u.body.scrollWidth,r=u.body.scrollHeight):(i=u.body.offsetWidth,r=u.body.offsetHeight),self.innerHeight?(n=self.innerWidth,t=self.innerHeight):u.documentElement&&u.documentElement.clientHeight?(n=u.documentElement.clientWidth,t=u.documentElement.clientHeight):u.body&&(n=u.body.clientWidth,t=u.body.clientHeight),f=Math.max(i,n),e=Math.max(r,t),[f,e,n,t]};i.inputPoller=function(n,t){var l=this,r=i.panels.input,u,e,o,s,h,c;this.tick=function(){if(f.isVisible(r)){if(r.selectionStart||r.selectionStart===0){var n=r.selectionStart,t=r.selectionEnd;if((n!=u||t!=e)&&(u=n,e=t,o!=r.value))return o=r.value,!0}return!1}};h=function(){f.isVisible(r)&&l.tick()&&n()};c=function(){s=top.setInterval(h,t)};this.destroy=function(){top.clearInterval(s)};c()};i.undoManager=function(n){var c=this,u=[],t=0,o="none",r,a,v,l,s=function(n,t){o!=n&&(o=n,t||y());e.isIE&&o=="moving"?l=null:v=top.setTimeout(h,1)},h=function(){l=new i.TextareaState;a.tick();v=undefined};this.setCommandMode=function(){o="command";y();v=top.setTimeout(h,0)};this.canUndo=function(){return t>1};this.canRedo=function(){return u[t+1]?!0:!1};this.undo=function(){c.canUndo()&&(r?(r.restore(),r=null):(u[t]=new i.TextareaState,u[--t].restore(),n&&n()));o="none";i.panels.input.focus();h()};this.redo=function(){c.canRedo()&&(u[++t].restore(),n&&n());o="none";i.panels.input.focus();h()};var y=function(){var f=l||new i.TextareaState;if(!f)return!1;if(o=="moving"){r||(r=f);return}r&&(u[t-1].text!=r.text&&(u[t++]=r),r=null);u[t++]=f;u[t+1]=null;n&&n()},p=function(n){var t=!1,i,r;if(n.ctrlKey||n.metaKey){i=n.charCode||n.keyCode;r=String.fromCharCode(i);switch(r){case"y":c.redo();t=!0;break;case"z":n.shiftKey?c.redo():c.undo();t=!0}}if(t){n.preventDefault&&n.preventDefault();top.event&&(top.event.returnValue=!1);return}},b=function(n){if(!n.ctrlKey&&!n.metaKey){var t=n.keyCode;t>=33&&t<=40||t>=63232&&t<=63235?s("moving"):t==8||t==46||t==127?s("deleting"):t==13?s("newlines"):t==27?s("escape"):(t<16||t>20)&&t!=91&&s("typing")}},k=function(){f.addEvent(i.panels.input,"keypress",function(n){(n.ctrlKey||n.metaKey)&&(n.keyCode==89||n.keyCode==90)&&n.preventDefault()});var n=function(){(e.isIE||l&&l.text!=i.panels.input.value)&&v==undefined&&(o="paste",y(),h())};a=new i.inputPoller(n,w);f.addEvent(i.panels.input,"keydown",p);f.addEvent(i.panels.input,"keydown",b);f.addEvent(i.panels.input,"mousedown",function(){s("moving")});i.panels.input.onpaste=n;i.panels.input.ondrop=n},d=function(){k();h();y()};this.destroy=function(){a&&a.destroy()};d()};i.editor=function(t){var y;t||(t=function(){});var s=i.panels.input,p=this,a,w,c,o=function(n){var r;if(s.focus(),n.textOp){if(c&&c.setCommandMode(),r=new i.TextareaState,!r)return;var u=r.getChunks(),f=function(){s.focus();u&&r.setChunks(u);r.restore();t()},e=n.textOp(u,f,!0);e||f()}n.execute&&n.execute(p)},v=function(){c&&(l(i.buttons["wmd-undo-button"],c.canUndo()),l(i.buttons["wmd-redo-button"],c.canRedo()))},l=function(n,t){var r="0px",u="-40px";t?(n.style.backgroundPosition=n.XShift+" "+r,n.onmouseover=function(){this.style.backgroundPosition=this.XShift+" "+u;this.style.cursor="pointer"},n.onmouseout=function(){this.style.backgroundPosition=this.XShift+" "+r},e.isIE&&(n.onmousedown=function(){i.ieRetardedClick=!0;i.ieCachedRange=document.selection.createRange()}),n.isHelp||(n.onclick=function(){return this.onmouseout&&this.onmouseout(),o(this),!1})):(n.style.backgroundPosition=n.XShift+" -20px",n.onmouseover=n.onmouseout=n.onclick=function(){})},g=function(){function a(n,t,r){var u=document.createElement("li");return i.buttons[n]=u,u.className="wmd-button "+n,u.XShift=o+"px",o-=20,t&&(u.title=t),r&&(u.textOp=r),u}function t(n,t,i){var r=a(n,t,i);return l(r,!0),u.appendChild(r),r}function s(){var n=document.createElement("li");return n.className="wmd-spacer",u.appendChild(n),n}var y=document.getElementById(n.button_bar||"wmd-button-bar"),u=document.createElement("ul"),o,w,c,f,e;u.className="wmd-button-row";u=y.appendChild(u);o=0;var g=t("wmd-bold-button","Strong <strong> Ctrl+B",r.doBold),nt=t("wmd-italic-button","Emphasis <em> Ctrl+I",r.doItalic),tt=s(),it=t("wmd-link-button","Hyperlink <a> Ctrl+L",function(n,t){return r.doLinkOrImage(n,t,!1)}),rt=t("wmd-quote-button","Blockquote <blockquote> Ctrl+Q",r.doBlockquote),ut=t("wmd-code-button","Code Sample <pre><code> Ctrl+K",r.doCode),ft=t("wmd-image-button","Image <img> Ctrl+G",function(n,t){return r.doLinkOrImage(n,t,!0)}),et=s(),ot=t("wmd-olist-button","Numbered List <ol> Ctrl+O",function(n,t,i){r.doList(n,t,!0,i)}),st=t("wmd-ulist-button","Bulleted List <ul> Ctrl+U",function(n,t,i){r.doList(n,t,!1,i)}),ht=t("wmd-heading-button","Heading <h1>/<h2> Ctrl+H",r.doHeading),ct=t("wmd-hr-button","Horizontal Rule <hr> Ctrl+R",r.doHorizontalRule),lt=s(),p=t("wmd-undo-button","Undo - Ctrl+Z");p.execute=function(n){n.undo()};w=null;c=t("wmd-redo-button","Redo - Ctrl+Y");c.title=/win/.test(h.platform.toLowerCase())?"Redo - Ctrl+Y":"Redo - Ctrl+Shift+Z";c.execute=function(n){n.redo()};f=a("wmd-help-button");f.isHelp=!0;l(f,!0);u.appendChild(f);e=document.createElement("a");e.href=b;e.target=d;e.title=k;f.appendChild(e);v()},nt=function(){var n,h;/\?noundo/.test(u.location.href)&&(i.nativeUndo=!0);i.nativeUndo||(c=new i.undoManager(function(){t();v()}));g();n="keydown";e.isOpera&&(n="keypress");f.addEvent(s,n,function(n){if(n.ctrlKey||n.metaKey){var t=n.charCode||n.keyCode,r=String.fromCharCode(t).toLowerCase();switch(r){case"b":o(i.buttons["wmd-bold-button"]);break;case"i":o(i.buttons["wmd-italic-button"]);break;case"l":o(i.buttons["wmd-link-button"]);break;case"q":o(i.buttons["wmd-quote-button"]);break;case"k":o(i.buttons["wmd-code-button"]);break;case"g":o(i.buttons["wmd-image-button"]);break;case"o":o(i.buttons["wmd-olist-button"]);break;case"u":o(i.buttons["wmd-ulist-button"]);break;case"h":o(i.buttons["wmd-heading-button"]);break;case"r":o(i.buttons["wmd-hr-button"]);break;case"y":o(i.buttons["wmd-redo-button"]);break;case"z":n.shiftKey?o(i.buttons["wmd-redo-button"]):o(i.buttons["wmd-undo-button"]);break;default:return}n.preventDefault&&n.preventDefault();top.event&&(top.event.returnValue=!1)}});f.addEvent(s,"keyup",function(n){if(!n.shiftKey&&!n.ctrlKey&&!n.metaKey){var t=n.charCode||n.keyCode;t===13&&(fakeButton={},fakeButton.textOp=r.doAutoindent,o(fakeButton))}});e.isIE&&f.addEvent(s,"keydown",function(n){var t=n.keyCode;if(t===27)return!1});s.form&&(h=s.form.onsubmit,s.form.onsubmit=function(){return tt(),h?h.apply(this,arguments):void 0})},tt=function(){var n,t,r;return i.showdown&&(n=new i.showdown.converter),t=s.value,r=function(){s.value=t},/markdown/.test(i.wmd_env.output_format.toLowerCase())||n&&(s.value=n.makeHtml(t),top.setTimeout(r,0)),!0};this.undo=function(){c&&c.undo()};this.redo=function(){c&&c.redo()};y=function(){nt()};this.destroy=function(){c&&c.destroy();a.parentNode&&a.parentNode.removeChild(a);s&&(s.style.marginTop="");top.clearInterval(w)};y()};i.TextareaState=function(){var t=this,n=i.panels.input;this.init=function(){f.isVisible(n)&&(this.setInputAreaSelectionStartEnd(),this.scrollTop=n.scrollTop,(!this.text&&n.selectionStart||n.selectionStart===0)&&(this.text=n.value))};this.setInputAreaSelection=function(){if(f.isVisible(n))if(n.selectionStart===undefined||e.isOpera){if(u.selection){if(u.activeElement&&u.activeElement!==n)return;n.focus();var i=n.createTextRange();i.moveStart("character",-n.value.length);i.moveEnd("character",-n.value.length);i.moveEnd("character",t.end);i.moveStart("character",t.start);i.select()}}else n.focus(),n.selectionStart=t.start,n.selectionEnd=t.end,n.scrollTop=t.scrollTop};this.setInputAreaSelectionStartEnd=function(){var r,s,h;if(n.selectionStart||n.selectionStart===0)t.start=n.selectionStart,t.end=n.selectionEnd;else if(u.selection){t.text=f.fixEolChars(n.value);i.ieRetardedClick&&i.ieCachedRange?(r=i.ieCachedRange,i.ieRetardedClick=!1):r=u.selection.createRange();var e=f.fixEolChars(r.text),o="\x07",c=o+e+o;if(r.text=c,s=f.fixEolChars(n.value),r.moveStart("character",-c.length),r.text=e,t.start=s.indexOf(o),t.end=s.lastIndexOf(o)-o.length,h=t.text.length-f.fixEolChars(n.value).length,h){for(r.moveStart("character",-e.length);h--;)e+="\n",t.end+=1;r.text=e}this.setInputAreaSelection()}};this.restore=function(){t.text!=undefined&&t.text!=n.value&&(n.value=t.text);this.setInputAreaSelection();n.scrollTop=t.scrollTop};this.getChunks=function(){var n=new i.Chunks;return n.before=f.fixEolChars(t.text.substring(0,t.start)),n.startTag="",n.selection=f.fixEolChars(t.text.substring(t.start,t.end)),n.endTag="",n.after=f.fixEolChars(t.text.substring(t.end)),n.scrollTop=t.scrollTop,n};this.setChunks=function(n){n.before=n.before+n.startTag;n.after=n.endTag+n.after;e.isOpera&&(n.before=n.before.replace(/\n/g,"\r\n"),n.selection=n.selection.replace(/\n/g,"\r\n"),n.after=n.after.replace(/\n/g,"\r\n"));this.start=n.before.length;this.end=n.before.length+n.selection.length;this.text=n.before+n.selection+n.after;this.scrollTop=n.scrollTop};this.init()};i.Chunks=function(){};i.Chunks.prototype.findTags=function(n,t){var i=this,r;n&&(r=f.extendRegExp(n,"","$"),this.before=this.before.replace(r,function(n){return i.startTag=i.startTag+n,""}),r=f.extendRegExp(n,"^",""),this.selection=this.selection.replace(r,function(n){return i.startTag=i.startTag+n,""}));t&&(r=f.extendRegExp(t,"","$"),this.selection=this.selection.replace(r,function(n){return i.endTag=n+i.endTag,""}),r=f.extendRegExp(t,"^",""),this.after=this.after.replace(r,function(n){return i.endTag=n+i.endTag,""}))};i.Chunks.prototype.trimWhitespace=function(n){this.selection=this.selection.replace(/^(\s*)/,"");n||(this.before+=o.$1);this.selection=this.selection.replace(/(\s*)$/,"");n||(this.after=o.$1+this.after)};i.Chunks.prototype.addBlankLines=function(n,t,i){n===undefined&&(n=1);t===undefined&&(t=1);n++;t++;var r,u;if(this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+o.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+o.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+o.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+o.$1,this.before){for(r=u="";n--;)r+="\\n?",u+="\n";i&&(r="\\n*");this.before=this.before.replace(new o(r+"$",""),u)}if(this.after){for(r=u="";t--;)r+="\\n?",u+="\n";i&&(r="\\n*");this.after=this.after.replace(new o(r,""),u)}};r.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)";r.unwrap=function(n){var t=new o("([^\\n])\\n(?!(\\n|"+r.prefixes+"))","g");n.selection=n.selection.replace(t,"$1 $2")};r.wrap=function(n,t){r.unwrap(n);var i=new o("(.{1,"+t+"})( +|$\\n?)","gm");n.selection=n.selection.replace(i,function(n,t){return new o("^"+r.prefixes,"").test(n)?n:t+"\n"});n.selection=n.selection.replace(/\s+$/,"")};r.doBold=function(n){return r.doBorI(n,2,"strong text")};r.doItalic=function(n){return r.doBorI(n,1,"emphasized text")};r.doBorI=function(n,t,i){var e,r,u,s,f;n.trimWhitespace();n.selection=n.selection.replace(/\n{2,}/g,"\n");n.before.search(/(\**$)/);e=o.$1;n.after.search(/(^\**)/);r=o.$1;u=Math.min(e.length,r.length);u>=t&&(u!=2||t!=1)?(n.before=n.before.replace(o("[*]{"+t+"}$",""),""),n.after=n.after.replace(o("^[*]{"+t+"}",""),"")):!n.selection&&r?(n.after=n.after.replace(/^([*_]*)/,""),n.before=n.before.replace(/(\s?)$/,""),s=o.$1,n.before=n.before+r+s):(n.selection||r||(n.selection=i),f=t<=1?"*":"**",n.before=n.before+f,n.after=f+n.after);return};r.stripLinkDefs=function(n,t){return n.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(n,i,r,u,f){return(t[i]=n.replace(/\s*$/,""),u)?(t[i]=n.replace(/["(](.+?)[")]$/,""),u+f):""})};r.addLinkDef=function(n,t){var u=0,i={},h;n.before=r.stripLinkDefs(n.before,i);n.selection=r.stripLinkDefs(n.selection,i);n.after=r.stripLinkDefs(n.after,i);var o="",f=/(\[(?:\[[^\]]*\]|[^\[\]])*\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,s=function(n){u++;n=n.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+u+"]:");o+="\n"+n},e=function(n,t,r,f){return i[r]?(s(i[r]),t+u+f):n};return n.before=n.before.replace(f,e),t?s(t):n.selection=n.selection.replace(f,e),h=u,n.after=n.after.replace(f,e),n.after&&(n.after=n.after.replace(/\n*$/,"")),n.after||(n.selection=n.selection.replace(/\n*$/,"")),n.after+="\n\n"+o,h};r.doLinkOrImage=function(n,t,i){if(n.trimWhitespace(),n.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/),n.endTag.length>1)n.startTag=n.startTag.replace(/!?\[/,""),n.endTag="",r.addLinkDef(n,null);else{if(/\n\n/.test(n.selection)){r.addLinkDef(n,null);return}var u=function(u){if(u!==null){n.startTag=n.endTag="";var f=" [999]: "+u,e=r.addLinkDef(n,f);n.startTag=i?"![":"[";n.endTag="]["+e+"]";n.selection||(n.selection=i?"alt text":"link text")}t()};return i?f.prompt(c,a,u):f.prompt(l,v,u),!0}};f.makeAPI=function(){i.wmd={};i.wmd.editor=i.editor;i.wmd.previewManager=i.previewManager};f.startEditor=function(){if(i.wmd_env.autostart===!1){f.makeAPI();return}var t,n,r=function(){i.panels=new i.PanelCollection;n=new i.previewManager;var r=n.refresh;t=new i.editor(r);n.refresh(!0)};f.addEvent(top,"load",r)};i.previewManager=function(){var d=this,n,r,t,o,h,a,v=3e3,c="delayed",g=function(n,t){f.addEvent(n,"input",t);n.onpaste=t;n.ondrop=t;f.addEvent(n,"keypress",t);f.addEvent(n,"keydown",t);r=new i.inputPoller(t,p)},y=function(){var n=0;return top.innerHeight?n=top.pageYOffset:u.documentElement&&u.documentElement.scrollTop?n=u.documentElement.scrollTop:u.body&&(n=u.body.scrollTop),n},l=function(){var t,r,u;(i.panels.preview||i.panels.output)&&((t=i.panels.input.value,t&&t==h)||(h=t,r=(new Date).getTime(),!n&&i.showdown&&(n=new i.showdown.converter),n&&(t=n.makeHtml(t)),u=(new Date).getTime(),o=u-r,tt(t),a=t))},w=function(){if(t&&(top.clearTimeout(t),t=undefined),c!=="manual"){var n=0;c==="delayed"&&(n=o);n>v&&(n=v);t=top.setTimeout(l,n)}},b=function(n){return n.scrollHeight<=n.clientHeight?1:n.scrollTop/(n.scrollHeight-n.clientHeight)},nt=function(){i.panels.preview&&(i.panels.preview.scrollTop=(i.panels.preview.scrollHeight-i.panels.preview.clientHeight)*b(i.panels.preview));i.panels.output&&(i.panels.output.scrollTop=(i.panels.output.scrollHeight-i.panels.output.clientHeight)*b(i.panels.output))};this.refresh=function(n){n?(h="",l()):w()};this.processingTime=function(){return o};this.output=function(){return a};this.setUpdateMode=function(n){c=n;d.refresh()};var k=!0,tt=function(n){var u=s.getTop(i.panels.input)-y(),t,r;if(i.panels.output&&(i.panels.output.value!==undefined?(i.panels.output.value=n,i.panels.output.readOnly=!0):(t=n.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),i.panels.output.innerHTML="<pre><code>"+t+"<\/code><\/pre>")),i.panels.preview&&(i.panels.preview.innerHTML=n),nt(),k){k=!1;return}r=s.getTop(i.panels.input)-y();e.isIE?top.setTimeout(function(){top.scrollBy(0,r-u)},0):top.scrollBy(0,r-u)},it=function(){g(i.panels.input,w);l();i.panels.preview&&(i.panels.preview.scrollTop=0);i.panels.output&&(i.panels.output.scrollTop=0)};this.destroy=function(){r&&r.destroy()};it()};r.doAutoindent=function(n,t,i){n.before=n.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n");n.before=n.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n");n.before=n.before.replace(/(\n|^)[ \t]+\n$/,"\n\n");i=!1;/(\n|^)[ ]{0,3}([*+-])[ \t]+.*\n$/.test(n.before)&&r.doList&&r.doList(n,t,!1,!0);/(\n|^)[ ]{0,3}(\d+[.])[ \t]+.*\n$/.test(n.before)&&r.doList&&r.doList(n,t,!0,!0);/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(n.before)&&r.doBlockquote&&r.doBlockquote(n,t,i);/(\n|^)(\t|[ ]{4,}).*\n$/.test(n.before)&&r.doCode&&r.doCode(n,t,i)};r.doBlockquote=function(n,t,u){var e,f;n.selection=n.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(t,i,r,u){return n.before+=i,n.after=u+n.after,r});n.before=n.before.replace(/(>[ \t]*)$/,function(t,i){return n.selection=i+n.selection,""});e=u?"Blockquote":"";n.selection=n.selection.replace(/^(\s|>)+$/,"");n.selection=n.selection||e;n.before&&(n.before=n.before.replace(/\n?$/,"\n"));n.after&&(n.after=n.after.replace(/^\n?/,"\n"));n.before=n.before.replace(/(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*$)/,function(t){return n.startTag=t,""});n.after=n.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(t){return n.endTag=t,""});f=function(t){var i=t?"> ":"";n.startTag&&(n.startTag=n.startTag.replace(/\n((>|\s)*)\n$/,function(n,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,i)+"\n"}));n.endTag&&(n.endTag=n.endTag.replace(/^\n((>|\s)*)\n/,function(n,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,i)+"\n"}))};/^(?![ ]{0,3}>)/m.test(n.selection)?(r.wrap(n,i.wmd_env.lineLength-2),n.selection=n.selection.replace(/^/gm,"> "),f(!0),n.addBlankLines()):(n.selection=n.selection.replace(/^[ ]{0,3}> ?/gm,""),r.unwrap(n),f(!1),!/^(\n|^)[ ]{0,3}>/.test(n.selection)&&n.startTag&&(n.startTag=n.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(n.selection)&&n.endTag&&(n.endTag=n.endTag.replace(/^\n{0,2}/,"\n\n")));/\n/.test(n.selection)||(n.selection=n.selection.replace(/^(> *)/,function(t,i){return n.startTag+=i,""}))};r.doCode=function(n,t,i){var f=/\S[ ]*$/.test(n.before),e=/^[ ]*\S/.test(n.after),r,u;(e||f)&&!/\n/.test(n.selection)?(n.trimWhitespace(),n.findTags(/`/,/`/),n.startTag||n.endTag?n.endTag&&!n.startTag?(n.before+=n.endTag,n.endTag=""):n.startTag=n.endTag="":(n.startTag=n.endTag="`",n.selection||(n.selection=i?"enter code here":""))):(n.before=n.before.replace(/[ ]{4}$/,function(t){return n.selection=t+n.selection,""}),r=1,u=1,(/\n(\t|[ ]{4,}).*\n$/.test(n.before)||n.after==="")&&(r=0),/^\n(\t|[ ]{4,})/.test(n.after)&&(u=0),n.addBlankLines(r,u),n.selection?n.selection=/^[ ]{0,3}\S/m.test(n.selection)?n.selection.replace(/^/gm,"    "):n.selection.replace(/^[ ]{4}/gm,""):(n.startTag="    ",n.selection=i?"enter code here":""))};r.doList=function(n,t,u,f){var v=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,y="-",p=1,w=function(){var n;return u?(n=" "+p+". ",p++):n=" "+y+" ",n},e=function(n){return u===undefined&&(u=/^\s*\d/.test(n)),n.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(){return w()})},s,h,c,l,a;(n.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!n.before||/\n$/.test(n.before)||/^\n/.test(n.startTag)||(n.before+=n.startTag,n.startTag=""),n.startTag&&(s=/\d+[.]/.test(n.startTag),n.startTag="",n.selection=n.selection.replace(/\n[ ]{4}/g,"\n"),r.unwrap(n),n.addBlankLines(),s&&(n.after=n.after.replace(v,e)),u==s))||(h=1,n.before=n.before.replace(/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,function(n){return/^\s*([*+-])/.test(n)&&(y=o.$1),h=/[^\n]\n\n[^\n]/.test(n)?1:0,e(n)}),n.selection||(n.selection=f?"List item":" "),c=w(),l=1,n.after=n.after.replace(v,function(n){return l=/[^\n]\n\n[^\n]/.test(n)?1:0,e(n)}),n.trimWhitespace(!0),n.addBlankLines(h,l,!0),n.startTag=c,a=c.replace(/./g," "),r.wrap(n,i.wmd_env.lineLength-a.length),n.selection=n.selection.replace(/\n/g,"\n"+a))};r.doHeading=function(n){var t,u,f,r;if(n.selection=n.selection.replace(/\s+/g," "),n.selection=n.selection.replace(/(^\s+|\s+$)/g,""),!n.selection){n.startTag="## ";n.selection="Heading";n.endTag=" ##";return}if(t=0,n.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(n.startTag)&&(t=o.lastMatch.length),n.startTag=n.endTag="",n.findTags(null,/\s?(-+|=+)/),/=+/.test(n.endTag)&&(t=1),/-+/.test(n.endTag)&&(t=2),n.startTag=n.endTag="",n.addBlankLines(1,1),u=t==0?2:t-1,u>0)for(f=u>=2?"-":"=",r=n.selection.length,r>i.wmd_env.lineLength&&(r=i.wmd_env.lineLength),n.endTag="\n";r--;)n.endTag+=f};r.doHorizontalRule=function(n){n.startTag="----------\n";n.selection="";n.addBlankLines(2,1,!0)}};t.wmd_env={};t.account_options={};t.wmd_defaults={version:2,output_format:"markdown",lineLength:40,delayLoad:!1};t.wmd||(t.wmd=function(){t.loadEnv=function(){var i=function(n){if(n)for(var i in n)t.wmd_env[i]=n[i]},r;i(t.wmd_defaults);i(t.account_options);i(n);t.full=!0;r="bold italic link blockquote code image ol ul heading hr";t.wmd_env.buttons=t.wmd_env.buttons||r};t.loadEnv()},t.wmd(),t.wmdBase(),t.Util.startEditor())}var Attacklab,Showdown;(function(n){var t=0;n.fn.wmd=function(i){this.each(function(){var r=n.extend({},i||{},{preview:!0});r.button_bar||(r.button_bar="wmd-button-bar-"+t,n("<div/>").attr("class","wmd-button-bar").attr("id",r.button_bar).insertBefore(this));typeof r.preview=="boolean"&&r.preview&&(r.preview="wmd-preview-"+t,n("<div/>").attr("class","wmd-preview").attr("id",r.preview).insertAfter(this));typeof r.output=="boolean"&&r.output&&(r.output="wmd-output-"+t,n("<div/>").attr("class","wmd-output").attr("id",r.output).insertAfter(this));this.id=this.id||"wmd-input-"+t;r.input=this.id;setup_wmd(r);t++})}})(jQuery);Attacklab=Attacklab||{};Attacklab.showdown=Attacklab.showdown||{};Attacklab.showdown.converter=function(){var n,t,e,o=0;this.makeHtml=function(i){return n=[],t=[],e=[],i=i.replace(/~/g,"~T"),i=i.replace(/\$/g,"~D"),i=i.replace(/\r\n/g,"\n"),i=i.replace(/\r/g,"\n"),i="\n\n"+i+"\n\n",i=d(i),i=i.replace(/^[ \t]+$/mg,""),i=v(i),i=g(i),i=s(i),i=k(i),i=i.replace(/~D/g,"$$"),i.replace(/~T/g,"~")};var g=function(i){var i=i.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(i,r,u,f,e){return(r=r.toLowerCase(),n[r]=b(u),f)?f+e:(e&&(t[r]=e.replace(/"/g,"&quot;")),"")});return i},v=function(n){n=n.replace(/\n/g,"\n\n");return n=n.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,u),n=n.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,u),n=n.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,u),n=n.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,u),n=n.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,u),n.replace(/\n\n/g,"\n")},u=function(n,t){var i=t;return i=i.replace(/\n\n/g,"\n"),i=i.replace(/^\n/,""),i=i.replace(/\n+$/g,""),"\n\n~K"+(e.push(i)-1)+"K\n\n"},s=function(n){n=rt(n);var t=i("<hr />");return n=n.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,t),n=n.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,t),n=n.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,t),n=p(n),n=ut(n),n=ot(n),n=v(n),st(n)},f=function(n){return n=ft(n),n=nt(n),n=ht(n),n=it(n),n=tt(n),n=ct(n),n=b(n),n=et(n),n.replace(/  +\n/g," <br />\n")},nt=function(n){return n.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,function(n){var t=n.replace(/(.)<\/?code>(?=.)/g,"$1`");return r(t,"\\`*_")})},tt=function(n){return n=n.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,h),n=n.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,h),n.replace(/(\[([^\[\]]+)\])()()()()()/g,h)},h=function(i,u,f,e,o,s,h,c){var y;c==undefined&&(c="");var p=u,w=f,l=e.toLowerCase(),a=o,v=c;if(a=="")if(l==""&&(l=w.toLowerCase().replace(/ ?\n/g," ")),a="#"+l,n[l]!=undefined)a=n[l],t[l]!=undefined&&(v=t[l]);else if(p.search(/\(\s*\)$/m)>-1)a="";else return p;return a=r(a,"*_"),y='<a href="'+a+'"',v!=""&&(v=v.replace(/"/g,"&quot;"),v=r(v,"*_"),y+=' title="'+v+'"'),y+(">"+w+"<\/a>")},it=function(n){return n=n.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,y),n.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,y)},y=function(i,u,f,e,o,s,h,c){var w=u,y=f,a=e.toLowerCase(),v=o,l=c,p;if(l||(l=""),v=="")if(a==""&&(a=y.toLowerCase().replace(/ ?\n/g," ")),v="#"+a,n[a]!=undefined)v=n[a],t[a]!=undefined&&(l=t[a]);else return w;return y=y.replace(/"/g,"&quot;"),v=r(v,"*_"),p='<img src="'+v+'" alt="'+y+'"',l=l.replace(/"/g,"&quot;"),l=r(l,"*_"),p+=' title="'+l+'"',p+" />"},rt=function(n){return n=n.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(n,t){return i("<h1>"+f(t)+"<\/h1>")}),n=n.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(n,t){return i("<h2>"+f(t)+"<\/h2>")}),n.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(n,t,r){var u=t.length;return i("<h"+u+">"+f(r)+"<\/h"+u+">")})},c,p=function(n){n+="~0";var t=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return o?n=n.replace(t,function(n,t,i){var u=t,f=i.search(/[*+-]/g)>-1?"ul":"ol",r;return u=u.replace(/\n{2,}/g,"\n\n\n"),r=c(u),r=r.replace(/\s+$/,""),"<"+f+">"+r+"<\/"+f+">\n"}):(t=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,n=n.replace(t,function(n,t,i,r){var e=t,u=i,f=r.search(/[*+-]/g)>-1?"ul":"ol",u=u.replace(/\n{2,}/g,"\n\n\n"),o=c(u);return e+"<"+f+">\n"+o+"<\/"+f+">\n"})),n.replace(/~0/,"")};c=function(n){return o++,n=n.replace(/\n{2,}$/,"\n"),n+="~0",n=n.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(n,t,i,r,u){var e=u,o=t,h=i;return o||e.search(/\n{2,}/)>-1?e=s(l(e)):(e=p(l(e)),e=e.replace(/\n$/,""),e=f(e)),"<li>"+e+"<\/li>\n"}),n=n.replace(/~0/g,""),o--,n};var ut=function(n){return n+="~0",n=n.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(n,t,r){var u=t,f=r;return u=w(l(u)),u=d(u),u=u.replace(/^\n+/g,""),u=u.replace(/\n+$/g,""),u="<pre><code>"+u+"\n<\/code><\/pre>",i(u)+f}),n.replace(/~0/,"")},i=function(n){return n=n.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(e.push(n)-1)+"K\n\n"},ft=function(n){return n.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(n,t,i,r){var u=r;return u=u.replace(/^([ \t]*)/g,""),u=u.replace(/[ \t]*$/g,""),u=w(u),t+"<code>"+u+"<\/code>"})},w=function(n){return n=n.replace(/&/g,"&amp;"),n=n.replace(/</g,"&lt;"),n=n.replace(/>/g,"&gt;"),r(n,"*_{}[]\\",!1)},et=function(n){return n=n.replace(/(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\1/g,"<strong>$2<\/strong>"),n.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2<\/em>")},ot=function(n){return n.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(n,t){var r=t;return r=r.replace(/^[ \t]*>[ \t]?/gm,"~0"),r=r.replace(/~0/g,""),r=r.replace(/^[ \t]+$/gm,""),r=s(r),r=r.replace(/(^|\n)/g,"$1  "),r=r.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(n,t){var i=t;return i=i.replace(/^  /mg,"~0"),i.replace(/~0/g,"")}),i("<blockquote>\n"+r+"\n<\/blockquote>")})},st=function(n){var i,t,u;n=n.replace(/^\n+/g,"");n=n.replace(/\n+$/g,"");var s=n.split(/\n{2,}/g),r=[],o=s.length;for(t=0;t<o;t++)i=s[t],i.search(/~K(\d+)K/g)>=0?r.push(i):i.search(/\S/)>=0&&(i=f(i),i=i.replace(/^([ \t]*)/g,"<p>"),i+="<\/p>",r.push(i));for(o=r.length,t=0;t<o;t++)while(r[t].search(/~K(\d+)K/)>=0)u=e[RegExp.$1],u=u.replace(/\$/g,"$$$$"),r[t]=r[t].replace(/~K\d+K/,u);return r.join("\n\n")},b=function(n){return n=n.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),n.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},ht=function(n){return n=n.replace(/\\(\\)/g,a),n.replace(/\\([`*_{}\[\]()>#+-.!])/g,a)},ct=function(n){return n=n.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1<\/a>'),n.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(n,t){return lt(k(t))})},lt=function(n){function i(n){var t="0123456789ABCDEF",i=n.charCodeAt(0);return t.charAt(i>>4)+t.charAt(i&15)}var t=[function(n){return"&#"+n.charCodeAt(0)+";"},function(n){return"&#x"+i(n)+";"},function(n){return n}];return n="mailto:"+n,n=n.replace(/./g,function(n){if(n=="@")n=t[Math.floor(Math.random()*2)](n);else if(n!=":"){var i=Math.random();n=i>.9?t[2](n):i>.45?t[1](n):t[0](n)}return n}),n='<a href="'+n+'">'+n+"<\/a>",n.replace(/">.+:/g,'">')},k=function(n){return n.replace(/~E(\d+)E/g,function(n,t){var i=parseInt(t);return String.fromCharCode(i)})},l=function(n){return n=n.replace(/^(\t|[ ]{1,4})/gm,"~0"),n.replace(/~0/g,"")},d=function(n){return n=n.replace(/\t(?=\t)/g,"    "),n=n.replace(/\t/g,"~A~B"),n=n.replace(/~B(.+?)~A/g,function(n,t){for(var i=t,u=4-i.length%4,r=0;r<u;r++)i+=" ";return i}),n=n.replace(/~A/g,"    "),n.replace(/~B/g,"")},r=function(n,t,i){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])",u;return i&&(r="\\\\"+r),u=new RegExp(r,"g"),n.replace(u,a)},a=function(n,t){var i=t.charCodeAt(0);return"~E"+i+"E"}};Showdown=Attacklab.showdown;Attacklab.fileLoaded&&Attacklab.fileLoaded("showdown.js");
/*
//# sourceMappingURL=jquery.wmd.min.js.map
*/